<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Guardianes de los Derechos Humanos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.25) 0, transparent 55%),
        radial-gradient(circle at bottom right, rgba(52,211,153,0.28) 0, transparent 55%),
        linear-gradient(135deg, #e0f2ff, #f3f4ff);
    }

    .container {
      max-width: 960px;
      width: 100%;
      padding: 24px 16px 40px;
    }

    .game-card {
      position: relative;
      background: #ffffff;
      border-radius: 24px;
      padding: 26px 22px 22px;
      box-shadow: 0 18px 45px rgba(15,23,42,0.18);
      overflow: hidden;
    }

    .game-card::before {
      content: "";
      position: absolute;
      right: -60px;
      top: -60px;
      width: 220px;
      height: 220px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(59,130,246,0.16), transparent 60%);
    }

    .game-card::after {
      content: "üïäÔ∏è";
      position: absolute;
      right: 40px;
      top: 40px;
      font-size: 3rem;
      opacity: 0.18;
    }

    h1 {
      font-size: 1.9rem;
      margin: 0 0 8px;
      text-align: center;
      color: #111827;
      position: relative;
      z-index: 1;
    }

    .subtitle {
      text-align: center;
      font-size: 0.95rem;
      color: #4b5563;
      margin-bottom: 16px;
      position: relative;
      z-index: 1;
    }

    .subtitle-cta {
      text-align: center;
      font-size: 0.8rem;
      color: #6b7280;
      margin-bottom: 18px;
      position: relative;
      z-index: 1;
    }

    .subtitle-cta button {
      border: none;
      background: transparent;
      color: #0ea5e9;
      cursor: pointer;
      font-size: 0.8rem;
      text-decoration: underline;
      padding: 0;
    }

    .badge {
      display: inline-block;
      background: #dbeafe;
      color: #1d4ed8;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.75rem;
      margin-bottom: 6px;
    }

    .module-label {
      font-size: 0.8rem;
      color: #6b7280;
      margin-bottom: 2px;
    }

    .type-label {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 14px;
    }

    .progress {
      margin: 8px 0 16px;
    }

    .progress-text {
      font-size: 0.85rem;
      color: #4b5563;
      margin-bottom: 4px;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .progress-bar-inner {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #0ea5e9, #22c55e);
      transition: width 0.3s ease;
    }

    .question-text {
      font-size: 1.05rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 12px;
    }

    .options {
      margin-bottom: 10px;
    }

    .option-item {
      background: #f9fafb;
      border-radius: 999px;
      padding: 9px 14px;
      display: flex;
      align-items: center;
      margin-bottom: 7px;
      border: 1px solid transparent;
      transition: background 0.2s ease, border-color 0.2s ease, transform 0.08s ease;
      cursor: pointer;
    }

    .option-item:hover {
      background: #eef2ff;
      border-color: #c7d2fe;
      transform: translateY(-1px);
    }

    .option-item input {
      margin-right: 8px;
    }

    textarea {
      width: 100%;
      min-height: 90px;
      border-radius: 14px;
      border: 1px solid #d1d5db;
      padding: 10px;
      font-size: 0.95rem;
      resize: vertical;
      outline: none;
      background: #f9fafb;
    }

    textarea:focus {
      border-color: #0ea5e9;
      box-shadow: 0 0 0 2px rgba(14,165,233,0.2);
      background: #ffffff;
    }

    .feedback {
      margin-top: 10px;
      font-size: 0.9rem;
      min-height: 22px;
    }

    .feedback.correct {
      color: #16a34a;
    }

    .feedback.incorrect {
      color: #dc2626;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
      gap: 10px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      font-size: 0.95rem;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.2s ;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(90deg, #0ea5e9, #22c55e);
      color: #ffffff;
      box-shadow: 0 4px 12px rgba(34,197,94,0.45);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 7px 16px rgba(34,197,94,0.55);
    }

    .btn-secondary {
      background: #e5e7eb;
      color: #374151;
    }

    .btn-secondary:hover {
      background: #d1d5db;
    }

    .score {
      font-size: 0.9rem;
      color: #4b5563;
    }

    .hint {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 4px;
    }

    .end-screen {
      display: none;
      text-align: center;
      padding: 20px 10px 10px;
    }

    .end-title {
      font-size: 1.4rem;
      margin-bottom: 10px;
      color: #111827;
    }

    .end-score {
      font-size: 1rem;
      margin-bottom: 8px;
      color: #111827;
    }

    .end-extra {
      font-size: 0.95rem;
      color: #4b5563;
      margin-bottom: 16px;
    }

    /* Intro overlay */

    .intro-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.58);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      z-index: 50;
    }

    .intro-card {
      max-width: 720px;
      width: 100%;
      background: #ffffff;
      border-radius: 20px;
      padding: 22px 20px 18px;
      box-shadow: 0 18px 40px rgba(15,23,42,0.6);
      position: relative;
    }

    .intro-card h2 {
      margin-top: 0;
      margin-bottom: 6px;
      font-size: 1.4rem;
      color: #111827;
    }

    .intro-page-indicator {
      font-size: 0.8rem;
      color: #6b7280;
      margin-bottom: 8px;
    }

    .intro-text {
      font-size: 0.93rem;
      color: #374151;
      line-height: 1.6;
    }

    .intro-text ul {
      padding-left: 18px;
      margin: 6px 0 8px;
    }

    .intro-bottom {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
      gap: 10px;
    }

    .intro-highlight {
      font-size: 0.85rem;
      color: #0f766e;
    }

    @media (max-width: 600px) {
      .game-card {
        padding: 20px 14px 18px;
      }
      h1 {
        font-size: 1.45rem;
      }
      .game-card::after {
        display: none;
      }
      .intro-card {
        padding: 18px 14px 14px;
      }
    }
  </style>
</head>
<body>
  <!-- Introducci√≥n de 2 p√°ginas -->
  <div class="intro-overlay" id="introOverlay">
    <div class="intro-card">
      <h2>¬øQu√© son los derechos humanos?</h2>
      <div class="intro-page-indicator" id="introPageIndicator">P√°gina 1 de 2</div>

      <div id="introPage1" class="intro-text">
        <p>
          Los derechos humanos son un conjunto de derechos y libertades que todas las personas tenemos
          <strong>por el simple hecho de ser humanas</strong>. No dependen de nuestra nacionalidad, edad,
          idioma, religi√≥n, color de piel, condici√≥n econ√≥mica u orientaci√≥n sexual.
        </p>
        <p>Algunas caracter√≠sticas clave:</p>
        <ul>
          <li><strong>Universales:</strong> aplican a todas las personas, en todas partes.</li>
          <li><strong>Inalienables:</strong> no se pueden quitar ni vender, aunque alguien lo intente.</li>
          <li><strong>Interdependientes:</strong> si se vulnera un derecho, suele afectar a otros (por ejemplo, sin educaci√≥n es m√°s dif√≠cil participar y opinar).</li>
          <li><strong>Iguales:</strong> todas las personas tienen la misma dignidad y el mismo valor.</li>
        </ul>
        <p>
          Estos derechos est√°n recogidos en documentos como la
          <strong>Declaraci√≥n Universal de los Derechos Humanos</strong> y en las constituciones de muchos pa√≠ses.
        </p>
      </div>

      <div id="introPage2" class="intro-text" style="display:none;">
        <p>
          Los derechos humanos buscan que todas las personas podamos vivir con
          <strong>dignidad</strong>. Eso incluye aspectos como:
        </p>
        <ul>
          <li>El derecho a la <strong>vida</strong> y a no ser torturado ni maltratado.</li>
          <li>El derecho a la <strong>igualdad y no discriminaci√≥n</strong>.</li>
          <li>El derecho a la <strong>libertad de expresi√≥n</strong> y a participar en las decisiones que nos afectan.</li>
          <li>El derecho a la <strong>educaci√≥n, salud y un nivel de vida adecuado</strong>.</li>
          <li>El derecho a un <strong>juicio justo</strong> y al debido proceso.</li>
        </ul>
        <p>
          En este juego ver√°s situaciones cotidianas y reflexionar√°s:
          <strong>¬øqu√© derecho est√° en juego?, ¬øqu√© podr√≠as hacer t√∫?</strong>
        </p>
        <p>
          Recuerda: conocer los derechos humanos es el primer paso para
          <strong>defenderlos y vivirlos</strong> en la vida diaria.
        </p>
      </div>

      <div class="intro-bottom">
        <div>
          <button class="btn btn-secondary" onclick="introPrev()">Anterior</button>
          <button class="btn btn-secondary" onclick="introNext()">Siguiente</button>
        </div>
        <div class="intro-highlight">
          Listo para jugar:
          <button class="btn btn-primary" onclick="introStart()">Empezar el juego</button>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="game-card">
      <h1>Guardianes de los Derechos Humanos</h1>
      <p class="subtitle">
        Responde preguntas, reflexiona sobre situaciones reales y convi√©rtete en defensor de los derechos humanos. üïäÔ∏è
      </p>
      <p class="subtitle-cta">
        ¬øQuieres volver a leer la introducci√≥n?
        <button onclick="openIntroAgain()">Ver introducci√≥n</button>
      </p>

      <div id="quizContainer">
        <div class="badge" id="moduleBadge">Introducci√≥n</div>
        <div class="module-label" id="moduleLabel"></div>
        <div class="type-label" id="typeLabel"></div>

        <div class="progress">
          <div class="progress-text" id="progressText">Pregunta 1 de 30</div>
          <div class="progress-bar">
            <div class="progress-bar-inner" id="progressBar"></div>
          </div>
        </div>

        <div class="question-text" id="questionText"></div>

        <div class="options" id="optionsContainer"></div>

        <textarea id="openAnswer" placeholder="Escribe tu respuesta aqu√≠..." style="display:none;"></textarea>
        <div class="hint" id="reflectionHint"></div>

        <div class="feedback" id="feedback"></div>

        <div class="controls">
          <div class="score" id="scoreText">Puntaje: 0</div>
          <button class="btn btn-primary" id="nextBtn">Responder</button>
        </div>
      </div>

      <div id="endScreen" class="end-screen"></div>
    </div>
  </div>

  <script>
    // === Banco de preguntas (30 total: 20 test, 10 abiertas) ===
    const questions = [
      // INTRODUCCI√ìN
      {
        module: "Introducci√≥n",
        type: "quiz",
        question: "¬øQu√© son los derechos humanos?",
        options: [
          "Reglas que solo aplican en algunos pa√≠ses.",
          "Derechos que todas las personas tenemos por el hecho de ser humanas.",
          "Permisos que da el gobierno si te portas bien.",
          "Beneficios que solo reciben algunos grupos."
        ],
        correct: 1,
        explanation: "Los derechos humanos pertenecen a todas las personas, sin importar su pa√≠s, edad, origen o creencias."
      },
      {
        module: "Introducci√≥n",
        type: "quiz",
        question: "¬øCu√°l de estas opciones describe mejor las caracter√≠sticas de los derechos humanos?",
        options: [
          "Son universales, inalienables e interdependientes.",
          "Son v√°lidos solo en pa√≠ses democr√°ticos.",
          "Cambian seg√∫n la opini√≥n de cada persona.",
          "Solo aplican a los adultos."
        ],
        correct: 0,
        explanation: "Los derechos humanos son universales, inalienables e interdependientes."
      },
      {
        module: "Introducci√≥n",
        type: "open",
        question: "¬øPor qu√© crees que es importante que los derechos humanos sean iguales para todas las personas?",
        reflectionHint: "Piensa en la igualdad, la justicia y en c√≥mo ser√≠a el mundo si algunas personas no tuvieran derechos."
      },
      {
        module: "Introducci√≥n",
        type: "open",
        question: "Pon un ejemplo de la vida diaria en el que creas que los derechos humanos son necesarios.",
        reflectionHint: "Por ejemplo: en la escuela, en el trabajo, en un hospital, en redes sociales, etc."
      },

      // DIGNIDAD, VIDA E IGUALDAD
      {
        module: "Dignidad, vida e igualdad",
        type: "quiz",
        question: "En tu colegio, un estudiante es insultado por su acento extranjero. ¬øQu√© derecho se vulnera principalmente?",
        options: [
          "Derecho al trabajo.",
          "Derecho a la igualdad y no discriminaci√≥n.",
          "Derecho al voto.",
          "Derecho a la propiedad."
        ],
        correct: 1,
        explanation: "Insultar o excluir a alguien por su origen vulnera la igualdad y la no discriminaci√≥n."
      },
      {
        module: "Dignidad, vida e igualdad",
        type: "quiz",
        question: "¬øCu√°l de estas frases respeta mejor la dignidad humana?",
        options: [
          "Todos debemos ser tratados con respeto, aunque pensemos distinto.",
          "Solo algunos merecen respeto si se lo ganan.",
          "Quien se equivoca merece ser humillado.",
          "Hay personas que valen m√°s que otras."
        ],
        correct: 0,
        explanation: "La dignidad implica respetar a todas las personas."
      },
      {
        module: "Dignidad, vida e igualdad",
        type: "quiz",
        question: "¬øPor qu√© se dice que el derecho a la vida es 'fundamental'?",
        options: [
          "Porque solo se aplica en emergencias.",
          "Porque sin vida no se pueden disfrutar los dem√°s derechos.",
          "Porque solo lo tienen las personas mayores.",
          "Porque depende de cada gobierno."
        ],
        correct: 1,
        explanation: "El derecho a la vida es la base para poder ejercer todos los dem√°s derechos humanos."
      },
      {
        module: "Dignidad, vida e igualdad",
        type: "quiz",
        question: "Un polic√≠a golpea a una persona detenida aunque no se resista. ¬øQu√© derechos se vulneran?",
        options: [
          "Solo el derecho al trabajo.",
          "La integridad f√≠sica y la dignidad de la persona.",
          "El derecho a la propiedad privada.",
          "Ning√∫n derecho, es parte del castigo."
        ],
        correct: 1,
        explanation: "La violencia innecesaria vulnera el derecho a la integridad f√≠sica y la dignidad."
      },
      {
        module: "Dignidad, vida e igualdad",
        type: "open",
        question: "Si ves que se burlan de alguien por su aspecto o forma de hablar, ¬øqu√© podr√≠as hacer para defender su dignidad sin ponerte en peligro?",
        reflectionHint: "Piensa en apoyar a la persona, no re√≠rte, avisar a un adulto, hablar con respeto, etc."
      },
      {
        module: "Dignidad, vida e igualdad",
        type: "open",
        question: "En redes sociales ves comentarios muy ofensivos contra una persona por su origen. ¬øC√≥mo podr√≠as reaccionar de forma responsable y cuidadosa?",
        reflectionHint: "Por ejemplo: denunciar el contenido, no compartirlo, enviar un mensaje de apoyo, avisar a alguien de confianza, etc."
      },

      // LIBERTAD DE EXPRESI√ìN Y PARTICIPACI√ìN
      {
        module: "Libertad de expresi√≥n y participaci√≥n",
        type: "quiz",
        question: "¬øCu√°l de estos ejemplos es un ejercicio sano de libertad de expresi√≥n?",
        options: [
          "Insultar a otros en redes porque 'yo digo lo que pienso'.",
          "Expresar tu opini√≥n con respeto, aunque sea diferente.",
          "Obligar a otros a pensar como t√∫.",
          "Difundir mentiras sobre alguien por diversi√≥n."
        ],
        correct: 1,
        explanation: "La libertad de expresi√≥n implica opinar respetando la dignidad y los derechos de los dem√°s."
      },
      {
        module: "Libertad de expresi√≥n y participaci√≥n",
        type: "quiz",
        question: "La participaci√≥n ciudadana significa:",
        options: [
          "Solo votar cada cierto tiempo.",
          "Tomar parte en decisiones que afectan tu comunidad.",
          "Dejar que otros decidan por ti.",
          "Quejarte en redes sin hacer nada m√°s."
        ],
        correct: 1,
        explanation: "Participar es involucrarse activamente en las decisiones de tu entorno."
      },
      {
        module: "Libertad de expresi√≥n y participaci√≥n",
        type: "quiz",
        question: "Un profesor proh√≠be a sus estudiantes opinar sobre un tema diciendo: 'aqu√≠ solo hablo yo'. ¬øQu√© derecho se limita?",
        options: [
          "El derecho al ocio.",
          "El derecho a la libertad de expresi√≥n.",
          "El derecho a la propiedad.",
          "Ning√∫n derecho, es normal."
        ],
        correct: 1,
        explanation: "Negar cualquier posibilidad de opinar limita la libertad de expresi√≥n y participaci√≥n."
      },
      {
        module: "Libertad de expresi√≥n y participaci√≥n",
        type: "quiz",
        question: "Compartir noticias falsas que da√±an la reputaci√≥n de otra persona puede vulnerar:",
        options: [
          "Solo el derecho al voto.",
          "El derecho al honor y a la informaci√≥n veraz.",
          "El derecho a la educaci√≥n.",
          "Ning√∫n derecho, es solo una broma."
        ],
        correct: 1,
        explanation: "Difundir informaci√≥n falsa puede vulnerar el honor y el derecho de otras personas a recibir informaci√≥n veraz."
      },
      {
        module: "Libertad de expresi√≥n y participaci√≥n",
        type: "open",
        question: "En tu escuela o barrio se toma una decisi√≥n que te afecta y nadie te pregunta. ¬øQu√© podr√≠as hacer para participar de forma respetuosa y hacer escuchar tu voz?",
        reflectionHint: "Piensa en dialogar, proponer ideas, escribir un mensaje o hablar con representantes."
      },
      {
        module: "Libertad de expresi√≥n y participaci√≥n",
        type: "open",
        question: "Quieres expresar tu opini√≥n sobre un tema pol√©mico en redes sociales. ¬øC√≥mo podr√≠as hacerlo de forma responsable y respetuosa?",
        reflectionHint: "Piensa en evitar insultos, verificar la informaci√≥n y respetar a quienes piensan distinto."
      },

      // EDUCACI√ìN, SALUD Y VIDA DIGNA
      {
        module: "Educaci√≥n, salud y vida digna",
        type: "quiz",
        question: "A un ni√±o se le niega la entrada a la escuela solo por ser pobre. ¬øQu√© derecho se vulnera principalmente?",
        options: [
          "Derecho a la recreaci√≥n.",
          "Derecho a la educaci√≥n.",
          "Derecho a la libertad de expresi√≥n.",
          "Derecho al voto."
        ],
        correct: 1,
        explanation: "La educaci√≥n debe ser accesible a todos sin discriminaci√≥n."
      },
      {
        module: "Educaci√≥n, salud y vida digna",
        type: "quiz",
        question: "¬øCu√°l de estas situaciones respeta mejor el derecho a la salud?",
        options: [
          "Atender solo a pacientes con dinero.",
          "Negarse a atender a alguien por su aspecto.",
          "Garantizar atenci√≥n b√°sica a todas las personas, sin discriminaci√≥n.",
          "Vender medicamentos falsos."
        ],
        correct: 2,
        explanation: "La salud es un derecho que debe protegerse para todas las personas."
      },
      {
        module: "Educaci√≥n, salud y vida digna",
        type: "quiz",
        question: "Una familia es desalojada sin aviso previo y sin ofrecerle ninguna alternativa de vivienda. ¬øQu√© derecho se afecta?",
        options: [
          "Solo el derecho a la libertad de expresi√≥n.",
          "El derecho a una vivienda adecuada y a un nivel de vida digno.",
          "El derecho al voto.",
          "Ning√∫n derecho, es una decisi√≥n privada."
        ],
        correct: 1,
        explanation: "Las personas tienen derecho a una vivienda adecuada y a un nivel de vida digno."
      },
      {
        module: "Educaci√≥n, salud y vida digna",
        type: "quiz",
        question: "Un trabajador recibe un salario muy bajo y no tiene descansos ni d√≠as libres. ¬øQu√© derecho se vulnera principalmente?",
        options: [
          "Derecho a un trabajo en condiciones justas y favorables.",
          "Derecho a la educaci√≥n.",
          "Derecho a la nacionalidad.",
          "Ninguno, es parte del esfuerzo."
        ],
        correct: 0,
        explanation: "El derecho al trabajo incluye condiciones justas, salario digno y descansos adecuados."
      },
      {
        module: "Educaci√≥n, salud y vida digna",
        type: "open",
        question: "Conoces a alguien que dej√≥ de estudiar para poder trabajar todo el d√≠a. ¬øQu√© podr√≠a hacer la sociedad (escuela, Estado, comunidad) para apoyarle?",
        reflectionHint: "Piensa en becas, apoyos econ√≥micos, horarios flexibles, programas especiales, etc."
      },
      {
        module: "Educaci√≥n, salud y vida digna",
        type: "open",
        question: "En tu barrio muchas personas no tienen acceso f√°cil a servicios de salud. ¬øQu√© acciones podr√≠an tomar los vecinos para defender ese derecho?",
        reflectionHint: "Por ejemplo: organizarse, pedir apoyo a autoridades, hacer peticiones formales, visibilizar la situaci√≥n, etc."
      },

      // NO DISCRIMINACI√ìN Y DIVERSIDAD
      {
        module: "No discriminaci√≥n y diversidad",
        type: "quiz",
        question: "¬øQu√© es la discriminaci√≥n?",
        options: [
          "Tratar a todas las personas igual.",
          "Tratar a alguien peor por alguna caracter√≠stica personal (origen, idioma, identidad, etc.).",
          "Estar de acuerdo con alguien.",
          "No querer tener amigos."
        ],
        correct: 1,
        explanation: "Discriminar es dar un trato injusto o desigual a una persona por qui√©n es."
      },
      {
        module: "No discriminaci√≥n y diversidad",
        type: "quiz",
        question: "En un trabajo deciden no contratar a una persona solo porque tiene discapacidad, aunque est√° capacitada. Esto es:",
        options: [
          "Una decisi√≥n normal.",
          "Un ejemplo de discriminaci√≥n.",
          "Algo que no tiene que ver con derechos humanos.",
          "Solo una preferencia personal."
        ],
        correct: 1,
        explanation: "Negar oportunidades por discapacidad es discriminaci√≥n y vulnera derechos."
      },
      {
        module: "No discriminaci√≥n y diversidad",
        type: "quiz",
        question: "A una estudiante no le permiten usar s√≠mbolos de su religi√≥n en la escuela, mientras que otras personas s√≠ pueden mostrar los suyos. ¬øQu√© ocurre?",
        options: [
          "Se respeta totalmente la libertad religiosa.",
          "Hay un trato desigual que puede ser discriminatorio.",
          "Solo se aplica una norma neutra.",
          "No tiene relaci√≥n con los derechos humanos."
        ],
        correct: 1,
        explanation: "Tratar de forma desigual a una persona por su religi√≥n puede ser discriminaci√≥n."
      },
      {
        module: "No discriminaci√≥n y diversidad",
        type: "quiz",
        question: "Un estudiante es excluido de una actividad escolar por su orientaci√≥n sexual. Esto vulnera principalmente:",
        options: [
          "El derecho a la propiedad.",
          "El derecho a la participaci√≥n y a la no discriminaci√≥n.",
          "Solo el derecho a la libertad de expresi√≥n.",
          "Ning√∫n derecho."
        ],
        correct: 1,
        explanation: "Excluir a alguien por su orientaci√≥n sexual vulnera su derecho a participar y a no ser discriminado."
      },
      {
        module: "No discriminaci√≥n y diversidad",
        type: "open",
        question: "Un compa√±ero nuevo es ignorado por ser de otro pa√≠s o hablar distinto. ¬øQu√© podr√≠as hacer t√∫ para que se sienta incluido?",
        reflectionHint: "Piensa en invitarlo a actividades, presentarlo al grupo, escucharlo, evitar burlas, etc."
      },
      {
        module: "No discriminaci√≥n y diversidad",
        type: "open",
        question: "Alguien dice: 'Si no piensas como yo, no perteneces aqu√≠'. ¬øC√≥mo podr√≠as responder de forma respetuosa defendiendo la idea de diversidad?",
        reflectionHint: "Puedes hablar de respeto, de escuchar otras opiniones y de que la diversidad enriquece al grupo."
      },

      // JUSTICIA Y DEBIDO PROCESO
      {
        module: "Justicia y debido proceso",
        type: "quiz",
        question: "Una persona es detenida sin explicaci√≥n y no le permiten hablar con un abogado. ¬øQu√© derechos se vulneran?",
        options: [
          "Solo el derecho a la educaci√≥n.",
          "El derecho a la libertad personal y al debido proceso.",
          "El derecho a la salud.",
          "Ning√∫n derecho, la polic√≠a siempre puede hacerlo."
        ],
        correct: 1,
        explanation: "Todas las personas tienen derecho a saber por qu√© son detenidas y a contar con defensa."
      },
      {
        module: "Justicia y debido proceso",
        type: "quiz",
        question: "La idea de 'presunci√≥n de inocencia' significa que:",
        options: [
          "Todas las personas son culpables hasta demostrar lo contrario.",
          "Una persona se considera inocente hasta que se demuestre su culpabilidad.",
          "Solo algunas personas tienen derechos.",
          "La polic√≠a decide qui√©n es culpable."
        ],
        correct: 1,
        explanation: "Nadie debe ser tratado como culpable sin pruebas y sin un juicio justo."
      }
    ];

    // --- utilidades ---
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    shuffle(questions);

    let currentIndex = 0;
    let score = 0;
    let hasAnswered = false;

    const moduleBadge = document.getElementById("moduleBadge");
    const moduleLabel = document.getElementById("moduleLabel");
    const typeLabel = document.getElementById("typeLabel");
    const progressText = document.getElementById("progressText");
    const progressBar = document.getElementById("progressBar");
    const questionText = document.getElementById("questionText");
    const optionsContainer = document.getElementById("optionsContainer");
    const openAnswer = document.getElementById("openAnswer");
    const reflectionHint = document.getElementById("reflectionHint");
    const feedback = document.getElementById("feedback");
    const scoreText = document.getElementById("scoreText");
    const nextBtn = document.getElementById("nextBtn");
    const quizContainer = document.getElementById("quizContainer");
    const endScreen = document.getElementById("endScreen");

    const introOverlay = document.getElementById("introOverlay");
    const introPage1 = document.getElementById("introPage1");
    const introPage2 = document.getElementById("introPage2");
    const introPageIndicator = document.getElementById("introPageIndicator");
    let introPage = 1;

    function updateIntroPage() {
      if (introPage === 1) {
        introPage1.style.display = "block";
        introPage2.style.display = "none";
        introPageIndicator.textContent = "P√°gina 1 de 2";
      } else {
        introPage1.style.display = "none";
        introPage2.style.display = "block";
        introPageIndicator.textContent = "P√°gina 2 de 2";
      }
    }

    function renderQuestion() {
      const q = questions[currentIndex];

      moduleBadge.textContent = q.module;
      moduleLabel.textContent = "M√≥dulo: " + q.module;
      typeLabel.textContent = q.type === "quiz"
        ? "Tipo de pregunta: opci√≥n m√∫ltiple"
        : "Tipo de pregunta: respuesta abierta / reflexi√≥n";

      const total = questions.length;
      const currentNumber = currentIndex + 1;
      progressText.textContent = `Pregunta ${currentNumber} de ${total}`;
      progressBar.style.width = (currentNumber / total) * 100 + "%";

      questionText.textContent = q.question;
      optionsContainer.innerHTML = "";
      feedback.textContent = "";
      feedback.className = "feedback";
      reflectionHint.textContent = "";
      openAnswer.style.display = "none";
      openAnswer.value = "";
      hasAnswered = false;
      nextBtn.textContent = "Responder";

      if (q.type === "quiz") {
        q.options.forEach((opt, idx) => {
          const label = document.createElement("label");
          label.className = "option-item";

          const input = document.createElement("input");
          input.type = "radio";
          input.name = "option";
          input.value = idx;

          label.appendChild(input);
          label.appendChild(document.createTextNode(opt));
          optionsContainer.appendChild(label);
        });
      } else {
        openAnswer.style.display = "block";
        if (q.reflectionHint) {
          reflectionHint.textContent = q.reflectionHint;
        }
      }
    }

    function endGame() {
      quizContainer.style.display = "none";
      endScreen.style.display = "block";

      const totalQuiz = questions.filter(q => q.type === "quiz").length;
      const percent = Math.round((score / totalQuiz) * 100);

      let levelMessage = "";
      if (percent >= 85) {
        levelMessage = "¬°Excelente! Eres un defensor avanzado de los derechos humanos. üôå";
      } else if (percent >= 60) {
        levelMessage = "Muy bien, tienes una buena base para defender los derechos humanos. üí™";
      } else if (percent >= 40) {
        levelMessage = "Vas por buen camino, pero todav√≠a puedes reforzar algunos conceptos. üìö";
      } else {
        levelMessage = "Es un buen comienzo. Conocer los derechos es el primer paso para defenderlos. üå±";
      }

      endScreen.innerHTML = `
        <div class="end-title">üéâ ¬°Has completado el juego!</div>
        <div class="end-score">Puntaje en preguntas de opci√≥n m√∫ltiple: <strong>${score}</strong> de <strong>${totalQuiz}</strong> (${percent}%).</div>
        <div class="end-extra">${levelMessage}</div>
        <button class="btn btn-primary" id="restartBtn">Jugar de nuevo</button>
      `;

      document.getElementById("restartBtn").onclick = () => {
        shuffle(questions);
        currentIndex = 0;
        score = 0;
        scoreText.textContent = "Puntaje: 0";
        quizContainer.style.display = "block";
        endScreen.style.display = "none";
        renderQuestion();
      };
    }

    nextBtn.onclick = () => {
      const q = questions[currentIndex];

      if (!hasAnswered) {
        if (q.type === "quiz") {
          const selected = document.querySelector('input[name="option"]:checked');
          if (!selected) {
            feedback.textContent = "Por favor, selecciona una opci√≥n antes de continuar.";
            feedback.className = "feedback incorrect";
            return;
          }
          const value = parseInt(selected.value, 10);
          if (value === q.correct) {
            score++;
            feedback.textContent = "‚úÖ ¬°Correcto! " + (q.explanation || "");
            feedback.className = "feedback correct";
          } else {
            feedback.textContent = "‚ùå No es correcto. " + (q.explanation || "");
            feedback.className = "feedback incorrect";
          }
          scoreText.textContent = `Puntaje: ${score}`;
        } else {
          const text = openAnswer.value.trim();
          if (!text) {
            feedback.textContent = "Escribe tu respuesta o reflexi√≥n antes de continuar. üìù";
            feedback.className = "feedback incorrect";
            return;
          }
          feedback.textContent = "üí° Gracias por tu respuesta. No hay correcto o incorrecto, lo importante es reflexionar.";
          feedback.className = "feedback correct";
        }

        hasAnswered = true;
        nextBtn.textContent = currentIndex === questions.length - 1 ? "Finalizar" : "Siguiente";
      } else {
        currentIndex++;
        if (currentIndex >= questions.length) {
          endGame();
        } else {
          renderQuestion();
        }
      }
    };

    // --- funciones globales para los botones de intro ---
    function introPrev() {
      introPage = 1;
      updateIntroPage();
    }

    function introNext() {
      introPage = 2;
      updateIntroPage();
    }

    function introStart() {
      introOverlay.style.display = "none";
    }

    function openIntroAgain() {
      introOverlay.style.display = "flex";
      introPage = 1;
      updateIntroPage();
    }

    // Inicializar
    updateIntroPage();
    renderQuestion();
  </script>
</body>
</html>
